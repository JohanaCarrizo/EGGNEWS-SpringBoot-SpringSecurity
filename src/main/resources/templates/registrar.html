<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace ="/fragments/head :: head ">

</head>
<body>

<!--CSS customer-->
<link href="../static/css/style-registrar.css" rel="stylesheet" type="text/css" th:href="@{/css/style-registrar.css}">
  <!-- Barra de navegación -->
  <nav th:replace = "/fragments/navbar :: nav"></nav>

<section>
  <div class="loginContainer">
    <div class="loginForm">
      <h2>Registro de usuario</h2>
      <hr>
      <form class="p-3" th:action="@{/registrar}" method="post">
        <div class="mb-3">
          <input type="text" class="form-control" name="nombreUsuario" placeholder="Nombre de usuario" th:value="${nombre}">
        </div>
        <div class="mb-3">
          <input type="password" class="form-control" name="pass" placeholder="Contraseña">
        </div>
        <div class="mb-3">
          <input type="password" class="form-control" name="pass2" placeholder="Repita su Contraseña">
        </div>
        <div class="d-grid gap-2 p-3">
          <button id="abrirModal" type="submit" class="btn btn-success"><strong>Registrarse</strong></button>
        </div>
        <div class="d-grid gap-2 col-6 mx-auto p-3">

          <a type="button" th:href="@{/}" class="btn btn-dark"><strong>Volver</strong></a>
        </div>

      </form>
    </div>

  </div>

  <!--Modal-->
  <div class="modal fade" id="ventanaModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="staticBackdropLabel">Modal title</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div th:if="${exito != null}">
            <span th:text="${exito}"></span>
          </div>
          <div th:if="${error != null}">
            <span th:text="${error}"></span>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Ventana modal
    var modal = document.getElementById("ventanaModal");

    // Botón que abre el modal
    var boton = document.getElementById("abrirModal");

    // Cuando el usuario hace click en el botón, se abre la ventana
    boton.addEventListener("click",function() {
      modal.style.display = "block";
    });

  </script>

  <div th:if="${exito != null}" class="alert alert-success" role="alert">
    <p th:text="${exito}"></p>
  </div>

  <div th:if="${error != null}" class="alert alert-danger" role="alert">
    <p th:text="${error}"></p>
  </div>

</section>

<!--Bootstrap JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
</body>
</html>